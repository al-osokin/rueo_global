# Этап 1: Структура проекта и первичный интерфейс (16 октября 2024)

## Реструктуризация репозитория

- Создан каталог `backend/`, куда перемещены исходники FastAPI (`backend/app/`), `Dockerfile` и `requirements.txt`.
- Исходные текстовые файлы словарей перенесены из `References/base_update/src` в `backend/data/src`. Путь по умолчанию для импортера и админки обновлён.
- `docker-compose.yml` теперь собирает бекенд из `./backend` и монтирует соответствующий каталог.
- В `.gitignore` добавлено правило `backend/data/`, чтобы не коммитить локальный дамп исходников.

## Импорт и служебные файлы

- `run_import()` теперь создаёт файл `backend/data/tekstoj/klarigo.textile` с актуальной статистикой по количеству статей и слов, аналогично старому сайту.
- Константа `DEFAULT_DATA_DIR` рассчитывается относительно каталога `backend`, что упрощает перенос на сервер.
- Во время импорта API `/admin/import/status` отображает этап выполнения и прогресс (по обработке файлов, построению индексов и обновлению `neklaraj`).
- Поддерживается параметр последнего готового слова русско-эсперантского словаря (`last-ru-letter`), который берётся из `last-ru-letter.txt` или задаётся вручную; статистика в `klarigo.textile` рассчитывается с его учётом.
- `last-ru-letter.txt` обновляется автоматически после импорта, а админ-интерфейс подставляет актуальное значение в поле ввода.
- Добавлен сервис `ArticleTracker`: хранит контрольные суммы статей в БД, обновляет даты редактирования и логирует изменения для обоих словарей.

## Пользователи

- В `backend/app/models.py` добавлена модель `User` с уникальным логином и хэшем пароля.
- `init_db()` автоматически создаёт запись пользователя `osokin` с паролем `40362151` (SHA-256) при первом запуске.

## Пользовательский интерфейс

- Добавлен каталог `frontend/` с двумя страницами:
  - `index.html` — поле поиска и отображение HTML-результатов; запрашивает `/search` и `/status/info`.
  - `admin.html` — панель запуска импортера и просмотра состояния `/admin/import/status`.
- `backend/app/main.py` теперь отдаёт `index.html` по `/`, а `/admin/ui` — административный экран.
- Эндпоинт `/status/info` читает `backend/data/tekstoj/klarigo.textile` и возвращает текст для фронтенда.


- В проект добавлен фронтенд `frontend-app/` (Vue + Quasar), переподключён к новым API (`/search`, `/suggest`, `/status/info`, `/admin/import`).

- Перед выкладкой на прод убедиться, что отправка сообщений по Ctrl+Enter работает (dev сейчас письмо не отправляет).
